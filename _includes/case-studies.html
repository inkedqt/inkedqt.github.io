{%- assign title = include.title | default: "🔍 Case Studies" -%}
{%- assign limit = include.limit | default: 999 -%}
{%- assign tag = include.tag -%}

<h2 class="section-title">{{ title }}</h2>
<div class="cert-grid">
  {%- assign items = site.data.case_studies | sort: "date" | reverse -%}
  {%- if tag -%}
    {%- assign items = items | where_exp: "i", "i.tags contains tag" -%}
  {%- endif -%}
  {%- for cs in items limit:limit -%}
    <div class="cert-card">
      {%- if cs.image -%}
        <img
          src="{{ cs.image | relative_url }}?v={{ site.time | date: '%s' }}"
          alt="{{ cs.name }} Case Study"
          class="cert-img"
        />
      {%- endif -%}
      <h3>Case Study — {{ cs.name }}</h3>
      <p>{{ cs.blurb }}</p>
      <p>
        <a
          href="{% if cs.url contains '://' %}{{ cs.url }}{% else %}{{ cs.url | relative_url }}{% endif %}"
          target="_blank" rel="noopener"
        >Read the Case Study</a>
      </p>
    </div>
  {%- endfor -%}
</div>
